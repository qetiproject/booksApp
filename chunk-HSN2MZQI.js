import{a as A}from"./chunk-MG6AAN6L.js";import{a as j}from"./chunk-7OVFYEO6.js";import{a as R,b as T}from"./chunk-J7COVTUU.js";import{a as v,c as M}from"./chunk-WAKTGZJV.js";import{G as L}from"./chunk-UEIXULZA.js";import{Bb as C,Cb as I,Db as B,Eb as p,Fb as m,Nb as w,Pb as E,Rb as h,Ua as S,Vc as D,d as o,e as c,f as d,gd as Q,ia as k,ib as _,na as l,sc as f,ta as x,ua as F,vc as g,yb as b,zb as y}from"./chunk-FHDIX2EK.js";var P=(()=>{var e,t,n;let r=class r{constructor(){c(this,e);c(this,t);c(this,n);d(this,e,l(A)),d(this,t,l(Q)),d(this,n,l(T)),this.books=D(o(this,t).select(R),{initialValue:[]})}getStartIndex(){return o(this,n).currentPage()-1}getBooks(s,u){s&&s.length>3?(u=null,o(this,t).dispatch(v({query:s,maxResults:o(this,n).maxResults(),startIndex:this.getStartIndex()}))):u?(s=null,o(this,t).dispatch(v({query:u,maxResults:o(this,n).maxResults(),startIndex:this.getStartIndex()}))):o(this,t).dispatch(M({error:"No query or category selected"}))}onAddInFavouriteEvent(s){o(this,e).addBookInFavourite(s)}resetPage(){o(this,n).setCurrentPage()}};e=new WeakMap,t=new WeakMap,n=new WeakMap,r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var N=(i,e)=>e.id;function $(i,e){if(i&1){let t=w();p(0,"app-book-card",2),E("addInFavourite",function(r){x(t);let a=h(2);return F(a.onAddInFavouriteEvent(r))}),m()}if(i&2){let t=e.$implicit;B("book",t)("showFavourite",!0)("showDetailsBtn",!0)}}function z(i,e){if(i&1&&(p(0,"div",0),C(1,$,1,3,"app-book-card",1,N),m()),i&2){let t=h();S(),I(t.books())}}var rt=(()=>{var e;let t=class t{constructor(){c(this,e);d(this,e,l(P)),this.searchQuery=g(""),this.categorySelected=g(null),this.books=o(this,e).books,this.initEffects()}initEffects(){f(()=>{this.searchQuery()&&o(this,e).getBooks(this.searchQuery(),null)}),f(()=>{this.categorySelected()!=null&&o(this,e).getBooks(null,this.categorySelected())})}onAddInFavouriteEvent(r){o(this,e).onAddInFavouriteEvent(r)}};e=new WeakMap,t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=_({type:t,selectors:[["app-book-list"]],inputs:{searchQuery:[1,"searchQuery"],categorySelected:[1,"categorySelected"]},decls:1,vars:1,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],[3,"book","showFavourite","showDetailsBtn"],[3,"addInFavourite","book","showFavourite","showDetailsBtn"]],template:function(a,s){a&1&&b(0,z,3,0,"div",0),a&2&&y(s.books()?0:-1)},dependencies:[L,j],encapsulation:2});let i=t;return i})();export{rt as a};
