import{L as xe,N as Ee,e as Ae,f as ye,q as ve}from"./chunk-MNP7KMF2.js";import{$a as zt,$b as re,A as j,Ab as Xt,B as $,Bb as Wt,Cc as de,D as Rt,Db as Jt,Dc as he,F as R,Fc as fe,G as N,Gb as nt,H as y,Hb as z,I as O,Ib as qt,J as kt,Jb as Yt,Jc as me,Kb as Qt,Kc as ge,Lb as ot,Mb as te,Nb as ee,O as Dt,Ob as B,P as Mt,Qa as $t,Qc as Se,R as jt,Rb as ne,Sc as Ie,Ub as L,V as Nt,Vb as oe,Wb as ie,X as Lt,Xb as se,Y as Pt,a as D,b as M,c as W,cb as Bt,d as J,da as Ft,db as _t,e as q,ea as Ut,eb as Gt,fb as Ht,fc as ce,g as Y,gb as Zt,hc as ae,i as It,ib as Kt,j as At,k as yt,l as vt,la as et,m as Q,mb as Vt,o as xt,oc as pe,p as b,pc as ue,q as tt,r as C,rc as _,s as Et,t as Ot,u as Tt,v as U,w as Ct,wc as le,x as bt,z as wt}from"./chunk-7WGUVRVG.js";var F="PERFORM_ACTION",en="REFRESH",ke="RESET",De="ROLLBACK",Me="COMMIT",je="SWEEP",Ne="TOGGLE_ACTION",nn="SET_ACTIONS_ACTIVE",Le="JUMP_TO_STATE",Pe="JUMP_TO_ACTION",gt="IMPORT_STATE",Fe="LOCK_CHANGES",Ue="PAUSE_RECORDING",k=class{constructor(e,r){if(this.action=e,this.timestamp=r,this.type=F,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},it=class{constructor(){this.type=en}},st=class{constructor(e){this.timestamp=e,this.type=ke}},rt=class{constructor(e){this.timestamp=e,this.type=De}},ct=class{constructor(e){this.timestamp=e,this.type=Me}},at=class{constructor(){this.type=je}},pt=class{constructor(e){this.id=e,this.type=Ne}};var ut=class{constructor(e){this.index=e,this.type=Le}},lt=class{constructor(e){this.actionId=e,this.type=Pe}},dt=class{constructor(e){this.nextLiftedState=e,this.type=gt}},ht=class{constructor(e){this.status=e,this.type=Fe}},ft=class{constructor(e){this.status=e,this.type=Ue}};var K=new N("@ngrx/store-devtools Options"),Oe=new N("@ngrx/store-devtools Initial Config");function $e(){return null}var on="NgRx Store DevTools";function sn(t){let e={maxAge:!1,monitor:$e,actionSanitizer:void 0,stateSanitizer:void 0,name:on,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},r=typeof t=="function"?t():t,n=r.logOnly?{pause:!0,export:!0,test:!0}:!1,o=r.features||n||e.features;o.import===!0&&(o.import="custom");let i=Object.assign({},e,{features:o},r);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function Te(t,e){return t.filter(r=>e.indexOf(r)<0)}function ze(t){let{computedStates:e,currentStateIndex:r}=t;if(r>=e.length){let{state:o}=e[e.length-1];return o}let{state:n}=e[r];return n}function P(t){return new k(t,+Date.now())}function rn(t,e){return Object.keys(e).reduce((r,n)=>{let o=Number(n);return r[o]=Be(t,e[o],o),r},{})}function Be(t,e,r){return M(D({},e),{action:t(e.action,r)})}function cn(t,e){return e.map((r,n)=>({state:_e(t,r.state,n),error:r.error}))}function _e(t,e,r){return t(e,r)}function Ge(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function an(t,e,r,n){let o=[],i={},m=[];return t.stagedActionIds.forEach((p,S)=>{let u=t.actionsById[p];u&&(S&&St(t.computedStates[S],u,e,r,n)||(i[p]=u,o.push(p),m.push(t.computedStates[S])))}),M(D({},t),{stagedActionIds:o,actionsById:i,computedStates:m})}function St(t,e,r,n,o){let i=r&&!r(t,e.action),m=n&&!e.action.type.match(n.map(S=>Ce(S)).join("|")),p=o&&e.action.type.match(o.map(S=>Ce(S)).join("|"));return i||m||p}function Ce(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function He(t){return{ngZone:t?O(Nt):null,connectInZone:t}}var V=(()=>{let e=class e extends z{};e.\u0275fac=(()=>{let n;return function(i){return(n||(n=jt(e)))(i||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),G={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},mt=new N("@ngrx/store-devtools Redux Devtools Extension"),Ze=(()=>{let e=class e{constructor(n,o,i){this.config=o,this.dispatcher=i,this.zoneConfig=He(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,o){if(this.devtoolsExtension)if(n.type===F){if(o.isLocked||o.isPaused)return;let i=ze(o);if(Ge(this.config)&&St(i,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let m=this.config.stateSanitizer?_e(this.config.stateSanitizer,i,o.currentStateIndex):i,p=this.config.actionSanitizer?Be(this.config.actionSanitizer,n,o.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(p,m))}else{let i=M(D({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?rn(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?cn(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Y(n=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(i=>n.next(i)),o.unsubscribe}):yt}createActionStreams(){let n=this.createChangesObservable().pipe(bt()),o=n.pipe(C(c=>c.type===G.START)),i=n.pipe(C(c=>c.type===G.STOP)),m=n.pipe(C(c=>c.type===G.DISPATCH),b(c=>this.unwrapAction(c.payload)),Ot(c=>c.type===gt?this.dispatcher.pipe(C(s=>s.type===ot),xt(1e3),Tt(1e3),b(()=>c),Et(()=>Q(c)),U(1)):Q(c))),S=n.pipe(C(c=>c.type===G.ACTION),b(c=>this.unwrapAction(c.payload))).pipe($(i)),u=m.pipe($(i));this.start$=o.pipe($(i)),this.actions$=this.start$.pipe(j(()=>S)),this.liftedActions$=this.start$.pipe(j(()=>u))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let o={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(o.maxAge=n.maxAge),o}sendToReduxDevtools(n){try{n()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}};e.\u0275fac=function(o){return new(o||e)(y(mt),y(K),y(V))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Z={type:nt},pn="@ngrx/store-devtools/recompute",un={type:pn};function Ke(t,e,r,n,o){if(n)return{state:r,error:"Interrupted by an error up the chain"};let i=r,m;try{i=t(r,e)}catch(p){m=p.toString(),o.handleError(p)}return{state:i,error:m}}function H(t,e,r,n,o,i,m,p,S){if(e>=t.length&&t.length===i.length)return t;let u=t.slice(0,e),c=i.length-(S?1:0);for(let s=e;s<c;s++){let h=i[s],A=o[h].action,l=u[s-1],a=l?l.state:n,x=l?l.error:void 0,E=m.indexOf(h)>-1?l:Ke(r,A,a,x,p);u.push(E)}return S&&u.push(t[t.length-1]),u}function ln(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:P(Z)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function dn(t,e,r,n,o={}){return i=>(m,p)=>{let{monitorState:S,actionsById:u,nextActionId:c,stagedActionIds:s,skippedActionIds:h,committedState:A,currentStateIndex:l,computedStates:a,isLocked:x,isPaused:I}=m||e;m||(u=Object.create(u));function E(g){let f=g,T=s.slice(1,f+1);for(let v=0;v<T.length;v++)if(a[v+1].error){f=v,T=s.slice(1,f+1);break}else delete u[T[v]];h=h.filter(v=>T.indexOf(v)===-1),s=[0,...s.slice(f+1)],A=a[f].state,a=a.slice(f),l=l>f?l-f:0}function w(){u={0:P(Z)},c=1,s=[0],h=[],A=a[l].state,l=0,a=[]}let d=0;switch(p.type){case Fe:{x=p.status,d=1/0;break}case Ue:{I=p.status,I?(s=[...s,c],u[c]=new k({type:"@ngrx/devtools/pause"},+Date.now()),c++,d=s.length-1,a=a.concat(a[a.length-1]),l===s.length-2&&l++,d=1/0):w();break}case ke:{u={0:P(Z)},c=1,s=[0],h=[],A=t,l=0,a=[];break}case Me:{w();break}case De:{u={0:P(Z)},c=1,s=[0],h=[],l=0,a=[];break}case Ne:{let{id:g}=p;h.indexOf(g)===-1?h=[g,...h]:h=h.filter(T=>T!==g),d=s.indexOf(g);break}case nn:{let{start:g,end:f,active:T}=p,v=[];for(let X=g;X<f;X++)v.push(X);T?h=Te(h,v):h=[...h,...v],d=s.indexOf(g);break}case Le:{l=p.index,d=1/0;break}case Pe:{let g=s.indexOf(p.actionId);g!==-1&&(l=g),d=1/0;break}case je:{s=Te(s,h),h=[],l=Math.min(l,s.length-1);break}case F:{if(x)return m||e;if(I||m&&St(m.computedStates[l],p,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let f=a[a.length-1];a=[...a.slice(0,-1),Ke(i,p.action,f.state,f.error,r)],d=1/0;break}o.maxAge&&s.length===o.maxAge&&E(1),l===s.length-1&&l++;let g=c++;u[g]=p,s=[...s,g],d=s.length-1;break}case gt:{({monitorState:S,actionsById:u,nextActionId:c,stagedActionIds:s,skippedActionIds:h,committedState:A,currentStateIndex:l,computedStates:a,isLocked:x,isPaused:I}=p.nextLiftedState);break}case nt:{d=0,o.maxAge&&s.length>o.maxAge&&(a=H(a,d,i,A,u,s,h,r,I),E(s.length-o.maxAge),d=1/0);break}case ot:{if(a.filter(f=>f.error).length>0)d=0,o.maxAge&&s.length>o.maxAge&&(a=H(a,d,i,A,u,s,h,r,I),E(s.length-o.maxAge),d=1/0);else{if(!I&&!x){l===s.length-1&&l++;let f=c++;u[f]=new k(p,+Date.now()),s=[...s,f],d=s.length-1,a=H(a,d,i,A,u,s,h,r,I)}a=a.map(f=>M(D({},f),{state:i(f.state,un)})),l=s.length-1,o.maxAge&&s.length>o.maxAge&&E(s.length-o.maxAge),d=1/0}break}default:{d=1/0;break}}return a=H(a,d,i,A,u,s,h,r,I),S=n(S,p),{monitorState:S,actionsById:u,nextActionId:c,stagedActionIds:s,skippedActionIds:h,committedState:A,currentStateIndex:l,computedStates:a,isLocked:x,isPaused:I}}}var be=(()=>{let e=class e{constructor(n,o,i,m,p,S,u,c){let s=ln(u,c.monitor),h=dn(u,s,S,c.monitor,c),A=tt(tt(o.asObservable().pipe(wt(1)),m.actions$).pipe(b(P)),n,m.liftedActions$).pipe(vt(At)),l=i.pipe(b(h)),a=He(c.connectInZone),x=new It(1);this.liftedStateSubscription=A.pipe(Rt(l),we(a),Ct(({state:w},[d,g])=>{let f=g(w,d);return d.type!==F&&Ge(c)&&(f=an(f,c.predicate,c.actionsSafelist,c.actionsBlocklist)),m.notify(d,f),{state:f,action:d}},{state:s,action:null})).subscribe(({state:w,action:d})=>{if(x.next(w),d.type===F){let g=d.action;p.next(g)}}),this.extensionStartSubscription=m.start$.pipe(we(a)).subscribe(()=>{this.refresh()});let I=x.asObservable(),E=I.pipe(b(ze));Object.defineProperty(E,"state",{value:Jt(E,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=I,this.state=E}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new k(n,+Date.now()))}refresh(){this.dispatch(new it)}reset(){this.dispatch(new st(+Date.now()))}rollback(){this.dispatch(new rt(+Date.now()))}commit(){this.dispatch(new ct(+Date.now()))}sweep(){this.dispatch(new at)}toggleAction(n){this.dispatch(new pt(n))}jumpToAction(n){this.dispatch(new lt(n))}jumpToState(n){this.dispatch(new ut(n))}importState(n){this.dispatch(new dt(n))}lockChanges(n){this.dispatch(new ht(n))}pauseRecording(n){this.dispatch(new ft(n))}};e.\u0275fac=function(o){return new(o||e)(y(V),y(z),y(Yt),y(Ze),y(te),y(Dt),y(qt),y(K))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function we({ngZone:t,connectInZone:e}){return r=>e?new Y(n=>r.subscribe({next:o=>t.run(()=>n.next(o)),error:o=>t.run(()=>n.error(o)),complete:()=>t.run(()=>n.complete())})):r}var hn=new N("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function fn(t,e){return!!t||e.monitor!==$e}function mn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function gn(t){return t.state}function Ve(t={}){return kt([Ze,V,be,{provide:Oe,useValue:t},{provide:hn,deps:[mt,K],useFactory:fn},{provide:mt,useFactory:mn},{provide:K,deps:[Oe],useFactory:sn},{provide:ee,deps:[be],useFactory:gn},{provide:Qt,useExisting:V}])}var Xe=[{path:"login",loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.RegisterUserComponent)},{path:"send-reset-otp",loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.ForgotPasswordComponent)},{path:"reset-password",loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.ResetPasswordComponent)}];var We=(()=>{var e,r;let n=class n{constructor(){J(this,e);J(this,r);q(this,e,O(_)),q(this,r,O(B)),this.email=""}resolve(){return W(this,r).select(me).pipe(C(i=>!!i),U(1),j(i=>W(this,e).getUserbyEmail(i)))}};e=new WeakMap,r=new WeakMap,n.\u0275fac=function(m){return new(m||n)},n.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Je=[{path:"",loadComponent:()=>import("./chunk-XG3YQMQA.js").then(t=>t.HomeComponent)},{path:":id",loadComponent:()=>import("./chunk-FBEAFVTT.js").then(t=>t.BookDetailsComponent),resolve:{book:ve},data:{}}];var qe=[{path:"",canActivate:[ie],pathMatch:"full",loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.LoginComponent)},{path:"books",canActivateChild:[L],children:Je},{path:"catalogue",canActivate:[L],loadComponent:()=>import("./chunk-H4XCD44K.js").then(t=>t.CataloguesComponent)},{path:"favourites",canActivate:[L],loadComponent:()=>import("./chunk-BZOMCWG4.js").then(t=>t.WishlistComponent)},{path:"",canActivate:[oe],children:Xe},{path:"profile",canActivate:[L],loadComponent:()=>import("./chunk-TIBRYSZG.js").then(t=>t.ProfileComponent),resolve:{user:We}},{path:"**",redirectTo:""}];var Ye={providers:[Mt(),$t({eventCoalescing:!0}),Vt(qe),Zt(Ht()),Bt(Gt(),_t([se,ae,re])),ne({auth:fe,user:Ie,books:Ee}),de([he,Se,xe]),Ve({maxAge:25,logOnly:!1})]};function Sn(t,e){t&1&&et(0,"app-header")}var Qe=(()=>{let e=class e{constructor(n){this.store=n,this.isLoggedIn=!1,this.authService=O(ue),this.tokenStorageService=O(pe),this.userService=O(_),this.store.select(ge).subscribe(o=>{this.isLoggedIn=o}),this.init()}init(){let n=this.tokenStorageService.getAccessToken(),o=localStorage.getItem(Wt.USER),i=o?JSON.parse(o):null;n&&i&&this.store.dispatch(le({response:i,userId:i.userId,email:i.email}))}};e.\u0275fac=function(o){return new(o||e)(Lt(B))},e.\u0275cmp=Pt({type:e,selectors:[["app-root"]],decls:4,vars:1,template:function(o,i){o&1&&(Ft(0,Sn,1,0,"app-header"),et(1,"app-loading")(2,"app-messages")(3,"router-outlet")),o&2&&Ut(i.isLoggedIn?0:-1)},dependencies:[Kt,Xt,ce,Ae,ye],encapsulation:2});let t=e;return t})();zt(Qe,Ye).catch(t=>console.error(t));
