import{b as A}from"./chunk-J66HQLTL.js";import{b as W}from"./chunk-T63SHC32.js";import"./chunk-XMIKUBPV.js";import{A as B,C as d,D as $,E as z,F as H,G as f,H as J,I as K,l as k,r as P,t as l,w as j,x as U}from"./chunk-UEIXULZA.js";import{a as X}from"./chunk-ZORAV33Y.js";import{a as O}from"./chunk-UZQL7P7K.js";import{Db as E,Eb as u,Fb as h,Gb as F,Hb as g,Ib as v,J as C,O as S,Ob as I,Pb as D,Pc as Q,Qb as N,R as w,Tb as T,Ua as m,Ub as L,Vb as G,Zb as a,_b as R,ca as x,ea as M,gc as V,gd as q,ha as _,ib as p,na as s,s as b,t as y}from"./chunk-FHDIX2EK.js";var Y=(()=>{let o=class o{constructor(){this.label="",this.placeholder="",this.type="text",this.value="",this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}handleInput(e){this.value=e,this.onChange(e)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=p({type:o,selectors:[["app-input"]],inputs:{label:"label",placeholder:"placeholder",type:"type"},features:[V([{provide:P,useExisting:_(()=>o),multi:!0}])],decls:4,vars:4,consts:[[1,"mb-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-4","py-2","border","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input","blur","type","placeholder","value"]],template:function(t,i){t&1&&(g(0,"div",0)(1,"label",1),a(2),v(),g(3,"input",2),N("input",function(c){return i.handleInput(c.target.value)})("blur",function(){return i.onTouched()}),v()()),t&2&&(m(2),R(i.label),m(),I("type",i.type)("placeholder",i.placeholder||"Enter "+i.label)("value",i.value))},dependencies:[Q,f],encapsulation:2});let r=o;return r})();var _e=(()=>{let o=class o{constructor(){this.fb=s(z),this.router=s(k),this.authService=s(A),this.messages=s(J),this.store=s(q),this.form=this.fb.nonNullable.group({username:["",[l.required,l.minLength(3)]],password:["",[l.required,l.minLength(4)]]})}onSubmit(e){let t=this.form.value;b([t]).pipe(w(i=>y(this.store.dispatch(O(i))).pipe(x(()=>this.store.select(X).pipe(C(n=>n),S(1),M(()=>this.router.navigate(["/books"]))))))).subscribe({next:()=>{this.messages.showMessage({text:` ${t.username} \u10EC\u10D0\u10E0\u10DB\u10D0\u10E2\u10D4\u10D1\u10D8\u10D7 \u10E8\u10D4\u10D5\u10D8\u10D3\u10D0 \u10E1\u10D8\u10E1\u10E2\u10D4\u10DB\u10D0\u10E8\u10D8!`,severity:K.Success})}}),this.formDir.resetForm(this.form.value)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=p({type:o,selectors:[["login"]],viewQuery:function(t,i){if(t&1&&T(d,5),t&2){let n;L(n=G())&&(i.formDir=n.first)}},decls:9,vars:1,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","bg-white","rounded-2xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","text-center","text-gray-800","mb-6"],[3,"ngSubmit","formGroup"],["label","Username","type","text","formControlName","username"],["label","Password","type","password","formControlName","password"],["type","submit",1,"w-full","mt-3","bg-blue-600","text-white","py-2","rounded-xl","hover:bg-blue-700","transition"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),a(3," Sign In "),h(),u(4,"form",3),D("ngSubmit",function(c){return i.onSubmit(c)}),F(5,"app-input",4)(6,"app-input",5),u(7,"button",6),a(8," Login "),h()()()()),t&2&&(m(4),E("formGroup",i.form))},dependencies:[f,B,j,U,d,$,Y,H,W],encapsulation:2});let r=o;return r})();export{_e as LoginComponent};
